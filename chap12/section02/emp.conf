input {
  jdbc {
    jdbc_driver_library => "/path/to/ojdbc8.jar"   # 오라클 JDBC 드라이버 경로
    jdbc_driver_class => "Java::oracle.jdbc.driver.OracleDriver"
    jdbc_connection_string => "jdbc:oracle:thin:@//db_host:1521/ORCL"  # DB 접속 정보
    jdbc_user => "user"
    jdbc_password => "password"

    # 사원 데이터 조회 쿼리
    statement => "
      SELECT
        ENO,
        ENAME,
        JOB,
        MANAGER,
        HIREDATE,
        SALARY,
        COMMISSION,
        DNO,
        INSERT_TIME,
        UPDATE_TIME
      FROM employee
    "
    schedule => "* * * * *"   # 매 분마다 실행 (필요에 따라 조절)
  }
}

filter {
  mutate {
    rename => {
      "ENO"         => "eno"
      "ENAME"       => "ename"
      "JOB"         => "job"
      "MANAGER"     => "manager"
      "HIREDATE"    => "hiredate"
      "SALARY"      => "salary"
      "COMMISSION"  => "commission"
      "DNO"         => "dno"
      "INSERT_TIME" => "insert_time"
      "UPDATE_TIME" => "update_time"
    }
    remove_field => ["@version", "@timestamp"]
  }
}

output {
  elasticsearch {
    hosts => ["http://localhost:9200"]
    index => "employee"
    document_id => "%{eno}"   # eno를 문서 ID로 사용해서 중복 방지
  }
  stdout { codec => json_lines }  # 콘솔 출력용 (디버깅 편리)
}
